<div class="add-game-container">
  <div class="add-game-card">
    <div class="card-header">
      <h1>Agregar Nuevo Juego</h1>
      <p class="subtitle">Completa los datos del videojuego</p>
    </div>

    <form [formGroup]="gameForm" (ngSubmit)="onSubmit()">
      <!-- Título -->
      <div class="form-group">
        <label for="title">Título del juego *</label>
        <input
          type="text"
          id="title"
          formControlName="title"
          placeholder="Ej: The Legend of Zelda"
          [class.error]="gameForm.get('title')?.touched && gameForm.get('title')?.invalid"
        />
        <span class="error-message" *ngIf="gameForm.get('title')?.touched && gameForm.get('title')?.invalid">
          {{ getErrorMessage('title') }}
        </span>
      </div>

      <!-- Descripción -->
      <div class="form-group">
        <label for="description">Descripción *</label>
        <textarea
          id="description"
          formControlName="description"
          rows="4"
          placeholder="Describe el juego en detalle..."
          [class.error]="gameForm.get('description')?.touched && gameForm.get('description')?.invalid"
        ></textarea>
        <span class="error-message" *ngIf="gameForm.get('description')?.touched && gameForm.get('description')?.invalid">
          {{ getErrorMessage('description') }}
        </span>
      </div>

      <!-- Precio -->
      <div class="form-group">
        <label for="price">Precio (USD) *</label>
        <input
          type="number"
          id="price"
          formControlName="price"
          placeholder="59.99"
          step="0.01"
          [class.error]="gameForm.get('price')?.touched && gameForm.get('price')?.invalid"
        />
        <span class="error-message" *ngIf="gameForm.get('price')?.touched && gameForm.get('price')?.invalid">
          {{ getErrorMessage('price') }}
        </span>
      </div>

      <!-- URL de Imagen -->
      <div class="form-group">
        <label for="imageUrl">URL de la imagen *</label>
        <input
          type="url"
          id="imageUrl"
          formControlName="imageUrl"
          placeholder="https://ejemplo.com/imagen.jpg"
          [class.error]="gameForm.get('imageUrl')?.touched && gameForm.get('imageUrl')?.invalid"
        />
        <span class="error-message" *ngIf="gameForm.get('imageUrl')?.touched && gameForm.get('imageUrl')?.invalid">
          {{ getErrorMessage('imageUrl') }}
        </span>
        <span class="help-text">Ingresa una URL válida de imagen</span>
      </div>

      <!-- Plataformas -->
      <div class="form-group">
        <label for="platform">Plataformas *</label>
        <input
          type="text"
          id="platform"
          formControlName="platform"
          placeholder="PS5, Xbox Series X, PC"
          [class.error]="gameForm.get('platform')?.touched && gameForm.get('platform')?.invalid"
        />
        <span class="error-message" *ngIf="gameForm.get('platform')?.touched && gameForm.get('platform')?.invalid">
          {{ getErrorMessage('platform') }}
        </span>
        <span class="help-text">Separa las plataformas por comas</span>
      </div>

      <!-- Tags -->
      <div class="form-group">
        <label for="tags">Etiquetas</label>
        <input
          type="text"
          id="tags"
          formControlName="tags"
          placeholder="Aventura, Acción, RPG"
        />
        <span class="help-text">Separa las etiquetas por comas (opcional)</span>
      </div>

      <!-- Rating -->
      <div class="form-group">
        <label for="rating">Puntuación (0-100)</label>
        <input
          type="number"
          id="rating"
          formControlName="rating"
          placeholder="95"
          min="0"
          max="100"
          [class.error]="gameForm.get('rating')?.touched && gameForm.get('rating')?.invalid"
        />
        <span class="error-message" *ngIf="gameForm.get('rating')?.touched && gameForm.get('rating')?.invalid">
          {{ getErrorMessage('rating') }}
        </span>
        <span class="help-text">Opcional - calificación del 0 al 100</span>
      </div>

      <!-- Mensajes de estado -->
      <div class="alert alert-error" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <div class="alert alert-success" *ngIf="successMessage">
        {{ successMessage }}
      </div>

      <!-- Botones -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" routerLink="/games">
          Cancelar
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="isLoading">
          <span *ngIf="!isLoading">Agregar Juego</span>
          <span *ngIf="isLoading">Agregando...</span>
        </button>
      </div>
    </form>
  </div>
</div>
