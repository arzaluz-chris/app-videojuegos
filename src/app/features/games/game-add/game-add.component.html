<app-menu></app-menu>

<div class="add-game-container">
  <div class="add-game-card">
    <div class="card-header">
      <h1>Agregar Nuevo Juego</h1>
      <p class="subtitle">Completa los datos del videojuego</p>
    </div>

    <form [formGroup]="gameForm" (ngSubmit)="onSubmit()">
      <!-- Título -->
      <div class="form-group">
        <label for="title">Título del juego *</label>
        <input
          type="text"
          id="title"
          formControlName="title"
          placeholder="Ej: The Legend of Zelda"
          [class.error]="gameForm.get('title')?.touched && gameForm.get('title')?.invalid"
        />
        <span class="error-message" *ngIf="gameForm.get('title')?.touched && gameForm.get('title')?.invalid">
          {{ getErrorMessage('title') }}
        </span>
      </div>

      <!-- Descripción -->
      <div class="form-group">
        <label for="description">Descripción *</label>
        <textarea
          id="description"
          formControlName="description"
          rows="4"
          placeholder="Describe el juego en detalle..."
          [class.error]="gameForm.get('description')?.touched && gameForm.get('description')?.invalid"
        ></textarea>
        <span class="error-message" *ngIf="gameForm.get('description')?.touched && gameForm.get('description')?.invalid">
          {{ getErrorMessage('description') }}
        </span>
      </div>

      <!-- Fecha de lanzamiento -->
      <div class="form-group">
        <label for="releaseDate">Fecha de lanzamiento *</label>
        <input
          type="text"
          id="releaseDate"
          formControlName="releaseDate"
          placeholder="Ej: 15/marzo/2024"
          [class.error]="gameForm.get('releaseDate')?.touched && gameForm.get('releaseDate')?.invalid"
        />
        <span class="error-message" *ngIf="gameForm.get('releaseDate')?.touched && gameForm.get('releaseDate')?.invalid">
          {{ getErrorMessage('releaseDate') }}
        </span>
        <span class="help-text">Formato sugerido: dd/mes/aaaa</span>
      </div>

      <!-- URL de Imagen -->
      <div class="form-group">
        <label for="imageUrl">URL de la imagen *</label>
        <input
          type="url"
          id="imageUrl"
          formControlName="imageUrl"
          placeholder="https://ejemplo.com/imagen.jpg"
          [class.error]="gameForm.get('imageUrl')?.touched && gameForm.get('imageUrl')?.invalid"
        />
        <span class="error-message" *ngIf="gameForm.get('imageUrl')?.touched && gameForm.get('imageUrl')?.invalid">
          {{ getErrorMessage('imageUrl') }}
        </span>
        <span class="help-text">Ingresa una URL válida de imagen</span>
      </div>

      <!-- Rating -->
      <div class="form-group">
        <label for="rating">Clasificación (0-5) *</label>
        <input
          type="number"
          id="rating"
          formControlName="rating"
          placeholder="4.5"
          min="0"
          max="5"
          step="0.1"
          [class.error]="gameForm.get('rating')?.touched && gameForm.get('rating')?.invalid"
        />
        <span class="error-message" *ngIf="gameForm.get('rating')?.touched && gameForm.get('rating')?.invalid">
          {{ getErrorMessage('rating') }}
        </span>
        <span class="help-text">Calificación de 0 a 5 estrellas</span>
      </div>

      <!-- Downloads -->
      <div class="form-group">
        <label for="downloads">Número de descargas *</label>
        <input
          type="number"
          id="downloads"
          formControlName="downloads"
          placeholder="1000"
          min="0"
          [class.error]="gameForm.get('downloads')?.touched && gameForm.get('downloads')?.invalid"
        />
        <span class="error-message" *ngIf="gameForm.get('downloads')?.touched && gameForm.get('downloads')?.invalid">
          {{ getErrorMessage('downloads') }}
        </span>
        <span class="help-text">Cantidad total de descargas</span>
      </div>

      <!-- Coming Soon -->
      <div class="form-group checkbox-group">
        <label class="checkbox-label">
          <input
            type="checkbox"
            formControlName="comingSoon"
          />
          <span>Marcar como "Próximamente"</span>
        </label>
        <span class="help-text">Si está activado, el juego aparecerá en la sección "Próximamente"</span>
      </div>

      <!-- Mensajes de estado -->
      <div class="alert alert-error" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <div class="alert alert-success" *ngIf="successMessage">
        {{ successMessage }}
      </div>

      <!-- Botones -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" routerLink="/games/most-popular">
          Cancelar
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="isLoading">
          <span *ngIf="!isLoading">Agregar Juego</span>
          <span *ngIf="isLoading">Agregando...</span>
        </button>
      </div>
    </form>
  </div>
</div>
