<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo -->
    <a routerLink="/games" class="navbar-brand" (click)="closeMobileMenu()">
      <span class="brand-icon">🎮</span>
      <span class="brand-text">Tienda Juegos</span>
    </a>

    <!-- Desktop Menu -->
    <div class="navbar-menu desktop-menu">
      <a
        routerLink="/games"
        routerLinkActive="active"
        class="nav-link"
      >
        Catálogo
      </a>

      <a
        *ngIf="isAuthenticated$ | async"
        routerLink="/games/add"
        routerLinkActive="active"
        class="nav-link"
      >
        Agregar Juego
      </a>

      <a
        *ngIf="isAuthenticated$ | async"
        routerLink="/profile"
        routerLinkActive="active"
        class="nav-link"
      >
        Perfil
      </a>
    </div>

    <!-- Auth Section -->
    <div class="navbar-auth desktop-menu">
      <!-- Usuario no autenticado -->
      <ng-container *ngIf="!(isAuthenticated$ | async)">
        <a routerLink="/login" class="btn btn-outline">
          Iniciar Sesión
        </a>
        <a routerLink="/register" class="btn btn-primary">
          Registrarse
        </a>
      </ng-container>

      <!-- Usuario autenticado -->
      <ng-container *ngIf="(isAuthenticated$ | async) && (currentUser$ | async) as user">
        <div class="user-info">
          <div class="user-avatar">
            {{ getUserInitials(user) }}
          </div>
          <span class="user-name">{{ user.name }}</span>
        </div>
        <button (click)="logout()" class="btn btn-outline">
          Cerrar Sesión
        </button>
      </ng-container>
    </div>

    <!-- Mobile Menu Button -->
    <button
      class="mobile-menu-btn"
      (click)="toggleMobileMenu()"
      [class.open]="isMobileMenuOpen"
    >
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div class="mobile-menu" [class.open]="isMobileMenuOpen">
    <a
      routerLink="/games"
      routerLinkActive="active"
      class="mobile-nav-link"
      (click)="closeMobileMenu()"
    >
      Catálogo
    </a>

    <a
      *ngIf="isAuthenticated$ | async"
      routerLink="/games/add"
      routerLinkActive="active"
      class="mobile-nav-link"
      (click)="closeMobileMenu()"
    >
      Agregar Juego
    </a>

    <a
      *ngIf="isAuthenticated$ | async"
      routerLink="/profile"
      routerLinkActive="active"
      class="mobile-nav-link"
      (click)="closeMobileMenu()"
    >
      Perfil
    </a>

    <div class="mobile-auth">
      <!-- Usuario no autenticado -->
      <ng-container *ngIf="!(isAuthenticated$ | async)">
        <a
          routerLink="/login"
          class="mobile-nav-link"
          (click)="closeMobileMenu()"
        >
          Iniciar Sesión
        </a>
        <a
          routerLink="/register"
          class="mobile-nav-link primary"
          (click)="closeMobileMenu()"
        >
          Registrarse
        </a>
      </ng-container>

      <!-- Usuario autenticado -->
      <ng-container *ngIf="isAuthenticated$ | async">
        <button
          (click)="logout()"
          class="mobile-nav-link danger"
        >
          Cerrar Sesión
        </button>
      </ng-container>
    </div>
  </div>
</nav>
